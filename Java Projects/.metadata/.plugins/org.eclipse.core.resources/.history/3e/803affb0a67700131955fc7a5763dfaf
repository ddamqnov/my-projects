import java.io.IOException;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;
import javax.persistence.PersistenceUnit;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet("/HelloJPAWebServlet")
public class HelloJPAServlet extends HttpServlet {
 
 private static final long serialVersionUID = 1L;

 // The container can inject the factory for you
 @PersistenceUnit(unitName = "HelloJPAWeb")
 private EntityManagerFactory emf;
 
 protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

 // But you will have to obtain the EntityManager yourself
 EntityManager em = emf.createEntityManager();

 // And handle the trasnactions yourself
 EntityTransaction tx = em.getTransaction();
  
   tx.begin();
  
    Employee emp = new Employee();
    emp.setName("Martin Petransky");
  
    em.persist(emp);
  
   tx.commit(); 
 
  em.close();
  
 }

}